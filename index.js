/*! For license information please see index.js.LICENSE.txt */
!function(){"use strict";var e={cardSection:".card-grid__format",cardTemplate:"myTemplate",previewPopup:"#image-popup-container",profilePopup:"#person-popup-container",placePopup:"#picture-popup-container",avatarPopup:"#avatar-popup-container",confirmPopup:"#confirm-popup-container",nameSelector:".intro__name",aboutSelector:".intro__occupation",avatarSelector:".intro__image"};function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function e(t,r,n,o,i,a){var c=t.data,u=t.handleZoom,s=i.handleCan,l=a.handleHeart;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=n,this._name=c.name,this._link=c.link,this.likes=c.likes,this.userId=o,this._ownerId=c.owner._id,this._id=c._id,this._cardSelector=r,this._handleCan=s.bind(this),this._handleHeart=l.bind(this),this._handleZoom=u.bind(this),this.addLike=this.addLike.bind(this),this.removeLike=this.removeLike.bind(this)}var r,n;return r=e,(n=[{key:"_getTemplate",value:function(){var e=document.querySelector("#".concat(this._cardSelector)).content.querySelector(".card-grid__style").cloneNode(!0);return console.log("cardElement=",e),e}},{key:"addLike",value:function(){this.cardGridHeart.classList.add("card-grid__icon_active")}},{key:"removeLike",value:function(){this.cardGridHeart.classList.remove("card-grid__icon_active")}},{key:"_setEventListeners",value:function(){var e=this;this.element.querySelector(".card-grid__icon").addEventListener("click",(function(){e._handleHeart(e)})),this.element.querySelector(".card-grid__garbage").addEventListener("click",this._handleCan),this.element.querySelector("img").addEventListener("click",this._handleZoom)}},{key:"createCard",value:function(){void 0===this.likes&&(this.likes=[]),this.element=this._getTemplate();var e=this.element.querySelector(".card-grid__picture"),t=this.element.querySelector(".card-grid__text");this.cardGridLikes=this.element.querySelector(".card-grid__likes"),this.cardGridHeart=this.element.querySelector(".card-grid__icon"),e.src=this._link,e.alt=this._name;for(var r=0;r<this.likes.length;r++)this.likes[r]._id===this.userId&&this.addLike();var n=this.element.querySelector(".card-grid__garbage");return this._ownerId!=this.userId&&n.classList.add("card-grid__garbage-invisible"),t.textContent=this._name,this.cardGridLikes.textContent=this.likes.length,this._setEventListeners(),this.element}}])&&t(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(),n=r;function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(t,r){var n=t.data,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=n,this._renderer=o,this._container=document.querySelector(r)}var t,r;return t=e,(r=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this.buttonClose=this._popupElement.querySelector(".popup__container-button-close"),this.close=this.close.bind(this),this._closePopupWithRemoteClick=this._closePopupWithRemoteClick.bind(this),this._closePopupWithEscape=this._closePopupWithEscape.bind(this),this.open=this.open.bind(this)}var t,r;return t=e,(r=[{key:"setEventListeners",value:function(){this.buttonClose.addEventListener("click",this.close),this._popupElement.addEventListener("mousedown",this._closePopupWithRemoteClick)}},{key:"open",value:function(){this._popupElement.classList.add("popup_visible"),document.addEventListener("keydown",this._closePopupWithEscape)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_visible"),document.removeEventListener("keydown",this._closePopupWithEscape)}},{key:"_closePopupWithEscape",value:function(e){27===e.which&&this.close(e.target)}},{key:"_closePopupWithRemoteClick",value:function(e){e.target===e.currentTarget&&this.close()}}])&&a(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=f(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},l.apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(o){var r=d(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return p(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).image=t._popupElement.querySelector(".image-popup__picture-zoom"),t.imageName=t._popupElement.querySelector(".image-popup__picture-text"),t}return t=a,(r=[{key:"open",value:function(e){var t=e.link,r=e.name;this.imageName.textContent=r,this.image.src=t,this.image.alt="Photo of ".concat(r),l(d(a.prototype),"open",this).call(this)}}])&&s(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(c);function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var m=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=r}var t,r;return t=e,(r=[{key:"_showInputError",value:function(e,t){var r=this._form.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),r.textContent=t,r.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"_toggleButtonState",value:function(){this._hasValidInputs(this._inputList)?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_hasValidInputs",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_checkInputValidity",value:function(e,t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_setEventListeners",value:function(){var e=this;this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(e._form,t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&v(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=w(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},g.apply(this,arguments)}function w(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function k(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(n);if(o){var r=L(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return k(this,e)});function a(e){var t,r,n,o,c=e.popupSelector,u=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o=function(e){e.preventDefault();var r=t._getInputValues();t._handleFormSubmit(r)},(n="_handleSubmit")in(r=S(t=i.call(this,c)))?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,t._popupForm=t._popupElement.querySelector(".popup__form"),t._handleFormSubmit=u.bind(S(t)),t._inputs=t._popupForm.querySelectorAll(".popup__container-input"),t}return t=a,(r=[{key:"_getInputValues",value:function(){var e={};return this._inputs.forEach((function(t){e[t.name]=t.value})),e}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"setEventListeners",value:function(){g(L(a.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",this._handleSubmit)}},{key:"close",value:function(){g(L(a.prototype),"close",this).call(this),this._popupForm.reset()}}])&&_(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(c);function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var C=function(){function e(t,r){var n=t.nameSelector,o=t.aboutSelector,i=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=document.querySelector(n),this._aboutElement=document.querySelector(o),this._avatarElement=document.querySelector(i),this.userId=r}var t,r;return t=e,r=[{key:"getUserInfo",value:function(){var e={userName:this._nameElement.textContent,userJob:this._aboutElement.textContent,userAvatar:this._avatarElement.src,userId:this.userId};return console.log("userInfo.userId inside UserInfo=",e.userId),e}},{key:"setUserInfo",value:function(e){var t=e.name,r=e.about,n=e.avatar,o=e.userId;t&&(this._nameElement.textContent=t),r&&(this._aboutElement.textContent=r),n&&(this._avatarElement.src=n),o&&(this.userId=o)}}],r&&O(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function j(){j=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new k(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=g(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,a),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l={};function f(){}function h(){}function p(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(S([])));v&&v!==t&&r.call(v,o)&&(d=v);var m=p.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,i,a,c){var u=s(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==x(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(u.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function g(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,g(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function S(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,c(m,"constructor",p),c(p,"constructor",h),h.displayName=c(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},b(_.prototype),c(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=S,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:S(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function I(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var q=function(){function e(t){var r=t.baseUrl,n=t.authToken;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=r,this._authToken=n,this._headers={authorization:this._authToken,"Content-type":"application/json"}}var t,r,n,o;return t=e,r=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error ".concat(e.status))}},{key:"getCardList",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:this._headers}).then(this._checkResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:this._headers}).then(this._checkResponse)}},{key:"addUserInfo",value:(n=j().mark((function e(t){var r,n;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,n=t.about,e.abrupt("return",fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:r,about:n})}).then(this._checkResponse));case 2:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(e){I(i,r,o,a,c,"next",e)}function c(e){I(i,r,o,a,c,"throw",e)}a(void 0)}))},function(e){return o.apply(this,arguments)})},{key:"addCard",value:function(e){var t=e.name,r=e.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})}).then(this._checkResponse)}},{key:"removeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"addLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._checkResponse)}},{key:"removeLike",value:function(e,t){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"addAvatar",value:function(e){var t=e.avatarLink;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then(this._checkResponse)}}],r&&T(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),R=q;function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=document.getElementById("buttonEditProfileSave"),B=document.getElementById("buttonNewPlaceCreate"),G=document.getElementById("buttonEditAvatarSave"),N=new R({baseUrl:"https://around.nomoreparties.co/v1/group-12",authToken:"e81f67bc-340b-41c4-ba13-967f5deca81e"}),F=(document.querySelector(".card-grid__garbage"),document.querySelector(".intro__image-overlay")),V=document.querySelector(".intro__button-pencil"),H=document.querySelector(".intro__button-plus"),W=document.querySelector('input[name ="name"]'),D=document.querySelector('input[name = "about"]'),J=new C(e),Z=new P({popupSelector:e.confirmPopup,handleFormSubmit:function(){var e=Z.currentCardElement;e.api.removeCard(e._id).then((function(t){Z.close(),e.element.remove(),console.log("card has been removed")})).catch((function(e){console.log("error=getCardList",e)}))}});Z.setEventListeners(),Promise.all([N.getUserInfo(),N.getCardList()]).then((function(t){var r,n,o=(n=2,function(e){if(Array.isArray(e))return e}(r=t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(r,n)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?U(e,t):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],c=o[1];J.setUserInfo({name:a.name,about:a.about,avatar:a.avatar,userId:a._id}),(M=new i({data:c,renderer:Y},e.cardSection)).renderItems(c)})).catch((function(e){console.log(e)}));var z=new y(e.previewPopup);z.setEventListeners();var M,Y=function(t){var r=new n({data:t,handleZoom:function(){z.open(t)}},e.cardTemplate,N,J.userId,{handleCan:function(){Z.currentCardElement=r,Z.open(r)}},{handleHeart:function(e){1===e.cardGridHeart.classList.length?N.addLike(e._id).then((function(t){e.addLike(),e.likes=t.likes,e.cardGridLikes.textContent=e.likes.length})).catch((function(e){console.log("error=",e)})):N.removeLike(e._id).then((function(t){e.removeLike(),e.likes=t.likes,e.cardGridLikes.textContent=e.likes.length})).catch((function(e){console.log("error=",e)}))}});M.addItem(r.createCard())},$=new P({popupSelector:e.placePopup,handleFormSubmit:function(e){console.log("xxxxxxx=",e),B.innerText="Creating...",N.addCard(e).then((function(e){Y(e),$.close()})).catch((function(e){console.log(e)})).finally((function(){B.innerText="Create"}))}});$.setEventListeners();var K=new P({popupSelector:e.profilePopup,handleFormSubmit:function(e){A.innerText="Saving...";var t=e.name,r=e.about;e.avatar,N.addUserInfo({name:t,about:r}).then((function(e){J.setUserInfo({name:e.name,about:e.about,avatar:e.avatar,userId:e._id}),K.close(),console.log("res=",e),console.log("userId  =",e._id)})).catch((function(e){console.log(e)})).finally((function(){A.innerText="Save"}))}});K.setEventListeners();var Q=new P({popupSelector:e.avatarPopup,handleFormSubmit:function(e){G.innerText="Saving...",N.addAvatar(e).then((function(t){!function(e){var t=e.avatarLink;J.setUserInfo({avatar:t})}(e),Q.close()})).catch((function(e){console.log(e)})).finally((function(){G.innerText="Save"}))}});function X(){var e=J.getUserInfo();W.value=e.userName,D.value=e.userJob}Q.setEventListeners(),V.addEventListener("click",(function(){X(),te.formEditProfile.resetValidation(),K.open()})),H.addEventListener("click",(function(){X(),te.formNewPlace.resetValidation(),$.open()})),F.addEventListener("click",(function(){X(),te.formEditAvatar.resetValidation(),Q.open()}));var ee,te={};ee={formSelector:".popup__form",inputSelector:".popup__container-input",submitButtonSelector:".popup__container-button",inactiveButtonClass:"popup__container-button-disabled",inputErrorClass:"popup__container-input-type-error",errorClass:"popup__container-error-visible"},Array.from(document.querySelectorAll(ee.formSelector)).forEach((function(e){var t=new m(ee,e),r=e.getAttribute("name");te[r]=t,t.enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFDMUNOLEdBQWVLLEdBQVlELEVBQzNCQSxFQUFVRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgRVNDX0tFWUNPREUgPSAyNztcblxuZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcbiAgY2FyZFNlY3Rpb246ICcuY2FyZC1ncmlkX19mb3JtYXQnLFxuICBjYXJkVGVtcGxhdGU6ICdteVRlbXBsYXRlJyxcbiAgcHJldmlld1BvcHVwOiAnI2ltYWdlLXBvcHVwLWNvbnRhaW5lcicsXG4gIHByb2ZpbGVQb3B1cDogJyNwZXJzb24tcG9wdXAtY29udGFpbmVyJyxcbiAgcGxhY2VQb3B1cDogJyNwaWN0dXJlLXBvcHVwLWNvbnRhaW5lcicsXG4gIGF2YXRhclBvcHVwOiAnI2F2YXRhci1wb3B1cC1jb250YWluZXInLFxuICBjb25maXJtUG9wdXA6ICcjY29uZmlybS1wb3B1cC1jb250YWluZXInLFxuICBuYW1lU2VsZWN0b3I6ICcuaW50cm9fX25hbWUnLFxuICBhYm91dFNlbGVjdG9yOiAnLmludHJvX19vY2N1cGF0aW9uJyxcbiAgYXZhdGFyU2VsZWN0b3I6ICcuaW50cm9fX2ltYWdlJyxcbn07XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2NvbnRhaW5lci1pbnB1dCcsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19jb250YWluZXItYnV0dG9uJyxcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19jb250YWluZXItYnV0dG9uLWRpc2FibGVkJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2NvbnRhaW5lci1pbnB1dC10eXBlLWVycm9yJyxcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19jb250YWluZXItZXJyb3ItdmlzaWJsZScsXG59O1xuIiwiY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHsgZGF0YSwgaGFuZGxlWm9vbSB9LFxuICAgIGNhcmRTZWxlY3RvcixcbiAgICBhcGksXG4gICAgdXNlcklkLFxuICAgIHsgaGFuZGxlQ2FuIH0sXG4gICAgeyBoYW5kbGVIZWFydCB9XG4gICkge1xuICAgIHRoaXMuYXBpID0gYXBpO1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLmxpa2VzID0gZGF0YS5saWtlcztcbiAgICB0aGlzLnVzZXJJZCA9IHVzZXJJZDtcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlQ2FuID0gaGFuZGxlQ2FuLmJpbmQodGhpcyk7XG4gICAgdGhpcy5faGFuZGxlSGVhcnQgPSBoYW5kbGVIZWFydC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZVpvb20gPSBoYW5kbGVab29tLmJpbmQodGhpcyk7XG4gICAgdGhpcy5hZGRMaWtlID0gdGhpcy5hZGRMaWtlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZW1vdmVMaWtlID0gdGhpcy5yZW1vdmVMaWtlLmJpbmQodGhpcyk7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoYCMke3RoaXMuX2NhcmRTZWxlY3Rvcn1gKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLmNhcmQtZ3JpZF9fc3R5bGUnKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICBjb25zb2xlLmxvZygnY2FyZEVsZW1lbnQ9JywgY2FyZEVsZW1lbnQpO1xuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIGFkZExpa2UoKSB7XG4gICAgdGhpcy5jYXJkR3JpZEhlYXJ0LmNsYXNzTGlzdC5hZGQoJ2NhcmQtZ3JpZF9faWNvbl9hY3RpdmUnKTtcbiAgfVxuXG4gIHJlbW92ZUxpa2UoKSB7XG4gICAgdGhpcy5jYXJkR3JpZEhlYXJ0LmNsYXNzTGlzdC5yZW1vdmUoJ2NhcmQtZ3JpZF9faWNvbl9hY3RpdmUnKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvLyBFVkVOVCBMSVNURU5FUiAtIEhFQVJUXG4gICAgdGhpcy5lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcignLmNhcmQtZ3JpZF9faWNvbicpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUhlYXJ0KHRoaXMpO1xuICAgICAgfSk7XG5cbiAgICAvLyBFVkVOVCBMSVNURU5FUiAtIEdBUkJBR0UgQ0FOXG4gICAgdGhpcy5lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcignLmNhcmQtZ3JpZF9fZ2FyYmFnZScpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVDYW4pO1xuXG4gICAgLy8gRVZFTlQgTElTVEVORVIgLSBJTUcgVEFHXG4gICAgdGhpcy5lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcignaW1nJylcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZVpvb20pO1xuICB9XG5cbiAgLy9DUkVBVEUgQ0FSRFxuICBjcmVhdGVDYXJkKCkge1xuICAgIGlmICh0aGlzLmxpa2VzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMubGlrZXMgPSBbXTtcbiAgICB9XG4gICAgdGhpcy5lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICBjb25zdCBjYXJkR3JpZFBpY3R1cmUgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtZ3JpZF9fcGljdHVyZScpO1xuICAgIGNvbnN0IGNhcmRHcmlkVGV4dCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1ncmlkX190ZXh0Jyk7XG4gICAgdGhpcy5jYXJkR3JpZExpa2VzID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWdyaWRfX2xpa2VzJyk7XG4gICAgdGhpcy5jYXJkR3JpZEhlYXJ0ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWdyaWRfX2ljb24nKTtcbiAgICBjYXJkR3JpZFBpY3R1cmUuc3JjID0gdGhpcy5fbGluaztcbiAgICBjYXJkR3JpZFBpY3R1cmUuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGlrZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLmxpa2VzW2ldLl9pZCA9PT0gdGhpcy51c2VySWQpIHtcbiAgICAgICAgdGhpcy5hZGRMaWtlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY2FyZENhbiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1ncmlkX19nYXJiYWdlJyk7XG4gICAgaWYgKHRoaXMuX293bmVySWQgIT0gdGhpcy51c2VySWQpIHtcbiAgICAgIGNhcmRDYW4uY2xhc3NMaXN0LmFkZCgnY2FyZC1ncmlkX19nYXJiYWdlLWludmlzaWJsZScpO1xuICAgIH1cblxuICAgIGNhcmRHcmlkVGV4dC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5jYXJkR3JpZExpa2VzLnRleHRDb250ZW50ID0gdGhpcy5saWtlcy5sZW5ndGg7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBkYXRhLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gZGF0YTtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoY2FyZERhdGEpID0+IHRoaXMuX3JlbmRlcmVyKGNhcmREYXRhKSk7XG4gIH1cblxuICBhZGRJdGVtKGl0ZW0pIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgRVNDX0tFWUNPREUgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMnO1xuXG5jbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuYnV0dG9uQ2xvc2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICcucG9wdXBfX2NvbnRhaW5lci1idXR0b24tY2xvc2UnXG4gICAgKTtcbiAgICB0aGlzLmNsb3NlID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2Nsb3NlUG9wdXBXaXRoUmVtb3RlQ2xpY2sgPVxuICAgICAgdGhpcy5fY2xvc2VQb3B1cFdpdGhSZW1vdGVDbGljay5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2Nsb3NlUG9wdXBXaXRoRXNjYXBlID0gdGhpcy5fY2xvc2VQb3B1cFdpdGhFc2NhcGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9wZW4gPSB0aGlzLm9wZW4uYmluZCh0aGlzKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuYnV0dG9uQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICdtb3VzZWRvd24nLFxuICAgICAgdGhpcy5fY2xvc2VQb3B1cFdpdGhSZW1vdGVDbGlja1xuICAgICk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdwb3B1cF92aXNpYmxlJyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2Nsb3NlUG9wdXBXaXRoRXNjYXBlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF92aXNpYmxlJyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2Nsb3NlUG9wdXBXaXRoRXNjYXBlKTtcbiAgfVxuXG4gIF9jbG9zZVBvcHVwV2l0aEVzY2FwZShldmVudCkge1xuICAgIGlmIChldmVudC53aGljaCA9PT0gRVNDX0tFWUNPREUpIHtcbiAgICAgIHRoaXMuY2xvc2UoZXZlbnQudGFyZ2V0KTtcbiAgICB9XG4gIH1cblxuICBfY2xvc2VQb3B1cFdpdGhSZW1vdGVDbGljayhldmVudCkge1xuICAgIGlmIChldmVudC50YXJnZXQgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UtcG9wdXBfX3BpY3R1cmUtem9vbScpO1xuICAgIHRoaXMuaW1hZ2VOYW1lID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAnLmltYWdlLXBvcHVwX19waWN0dXJlLXRleHQnXG4gICAgKTtcbiAgfVxuICBvcGVuKHsgbGluaywgbmFtZSB9KSB7XG4gICAgdGhpcy5pbWFnZU5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuaW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLmltYWdlLmFsdCA9IGBQaG90byBvZiAke25hbWV9YDtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG4gIH1cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc1ZhbGlkSW5wdXRzKHRoaXMuX2lucHV0TGlzdCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgX2hhc1ZhbGlkSW5wdXRzKGlucHV0TGlzdCkge1xuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KHRoaXMuX2Zvcm0sIGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5faW5wdXRzID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9fY29udGFpbmVyLWlucHV0Jyk7XG4gIH1cblxuICBfaGFuZGxlU3VibWl0ID0gKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodmFsdWVzKTtcbiAgfTtcblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRPYmplY3QgPSB7fTtcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0T2JqZWN0W2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGlucHV0T2JqZWN0O1xuICB9XG5cbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xuICAgIH0pO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5faGFuZGxlU3VibWl0KTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGFib3V0U2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yIH0sIHVzZXJJZCkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Fib3V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXRTZWxlY3Rvcik7XG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xuICAgIHRoaXMudXNlcklkID0gdXNlcklkO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgY29uc3QgdXNlckluZm8gPSB7XG4gICAgICB1c2VyTmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICB1c2VySm9iOiB0aGlzLl9hYm91dEVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICB1c2VyQXZhdGFyOiB0aGlzLl9hdmF0YXJFbGVtZW50LnNyYyxcbiAgICAgIHVzZXJJZDogdGhpcy51c2VySWQsXG4gICAgfTtcbiAgICBjb25zb2xlLmxvZygndXNlckluZm8udXNlcklkIGluc2lkZSBVc2VySW5mbz0nLCB1c2VySW5mby51c2VySWQpO1xuICAgIHJldHVybiB1c2VySW5mbztcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQsIGF2YXRhciwgdXNlcklkIH0pIHtcbiAgICBpZiAobmFtZSkgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIGlmIChhYm91dCkgdGhpcy5fYWJvdXRFbGVtZW50LnRleHRDb250ZW50ID0gYWJvdXQ7XG4gICAgaWYgKGF2YXRhcikgdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMgPSBhdmF0YXI7XG4gICAgaWYgKHVzZXJJZCkgdGhpcy51c2VySWQgPSB1c2VySWQ7XG4gIH1cbn1cbiIsImNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgYXV0aFRva2VuIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9hdXRoVG9rZW4gPSBhdXRoVG9rZW47XG4gICAgdGhpcy5faGVhZGVycyA9IHtcbiAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlbixcbiAgICAgICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgfTtcbiAgfVxuXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yICR7cmVzLnN0YXR1c31gKTtcbiAgfVxuXG4gIC8vIEdFVCBhbGwgY2FyZHMgZnJvbSBzZXJ2ZXJcbiAgLy8gR0VUIC8vaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92IS9ncm91cC0xMi9jYXJkc1wiXG4gIGdldENhcmRMaXN0KCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICAvLyBHRVQgdXNlciBpbmZvIGZyb20gc2VydmVyXG4gIC8vIEdFVCAvL2h0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdiEvZ3JvdXAtMTIvdXNlcnMvbWVcIlxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgLy8gUEFUQ0ggbmV3IHVzZXIgaW5mbyB0byB0aGUgc2VydmVyXG4gIC8vIFBBVENIIC8vaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92IS9ncm91cC0xMi91c2Vycy9tZVwiXG4gIGFzeW5jIGFkZFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGFib3V0LFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIC8vIFBPU1QgbmV3IGNhcmQgdG8gZGlzcGxheSB1c2luZyAnbmV3IHBsYWNlJyBwb3B1cCBmb3JtXG4gIC8vIFBPU1QgLy9odHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YhL2dyb3VwLTEyL2NhcmRzXCJcbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgbGluayxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICAvLyBQT1NUIGNoYW5nZSB0byB0aGUgc2VydmVyXG4gIC8vIFBPU1QgLy9odHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YhL2dyb3VwLTEyL2NhcmRzL2NhcmRJZFwiXG4gIHJlbW92ZUNhcmQoX2lkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7X2lkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICAvLyBhZGQgYSBsaWtlIHRvIGEgY2FyZFxuICAvLyBQVVQgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cElkL2NhcmRzL2xpa2VzL2NhcmRJZFxuICBhZGRMaWtlKF9pZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke19pZH1gLCB7XG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgLy8gcmVtb3ZlIGEgbGlrZSBmcm9tIGEgY2FyZFxuICAvLyBERUxFVEUgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cElkL2NhcmRzL2xpa2VzL2NhcmRJZFxuICByZW1vdmVMaWtlKF9pZCwgbmFtZSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke19pZH1gLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgLy8gYWRkIG5ldyBhdmF0YXJcbiAgLy8gUEFUQ0ggaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cElkL3VzZXJzL21lL2F2YXRhclxuICBhZGRBdmF0YXIoeyBhdmF0YXJMaW5rIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiBhdmF0YXJMaW5rLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBcGk7XG4iLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcbmltcG9ydCB7IHNlbGVjdG9ycywgY29uZmlnIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZCc7XG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24nO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UnO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yJztcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybSc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mbyc7XG5pbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcblxuY29uc3QgYnRuRWRpdFByb2ZpbGVTYXZlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1dHRvbkVkaXRQcm9maWxlU2F2ZScpO1xuY29uc3QgYnRuTmV3UGxhY2VDcmVhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnV0dG9uTmV3UGxhY2VDcmVhdGUnKTtcbmNvbnN0IGJ0bkVkaXRBdmF0YXJTYXZlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1dHRvbkVkaXRBdmF0YXJTYXZlJyk7XG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogJ2h0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTInLFxuICBhdXRoVG9rZW46ICdlODFmNjdiYy0zNDBiLTQxYzQtYmExMy05NjdmNWRlY2E4MWUnLFxufSk7XG5jb25zdCBidXR0b25DYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1ncmlkX19nYXJiYWdlJyk7XG5jb25zdCBidXR0b25BdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW50cm9fX2ltYWdlLW92ZXJsYXknKTtcbmNvbnN0IGJ1dHRvblBlbmNpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnRyb19fYnV0dG9uLXBlbmNpbCcpO1xuY29uc3QgYnV0dG9uUGx1cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnRyb19fYnV0dG9uLXBsdXMnKTtcbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZSA9XCJuYW1lXCJdJyk7XG5jb25zdCBwb3B1cEVkaXRQcm9maWxlQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lID0gXCJhYm91dFwiXScpO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhzZWxlY3RvcnMpO1xuXG5jb25zdCBjb25maXJtRGVsZXRlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IHNlbGVjdG9ycy5jb25maXJtUG9wdXAsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6ICgpID0+IHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNvbmZpcm1EZWxldGVQb3B1cC5jdXJyZW50Q2FyZEVsZW1lbnQ7XG4gICAgY2FyZEVsZW1lbnQuYXBpXG4gICAgICAucmVtb3ZlQ2FyZChjYXJkRWxlbWVudC5faWQpXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGNvbmZpcm1EZWxldGVQb3B1cC5jbG9zZSgpO1xuICAgICAgICBjYXJkRWxlbWVudC5lbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICBjb25zb2xlLmxvZygnY2FyZCBoYXMgYmVlbiByZW1vdmVkJyk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yPWdldENhcmRMaXN0JywgZXJyKTtcbiAgICAgIH0pO1xuICB9LFxufSk7XG5jb25maXJtRGVsZXRlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy9TSE9XIExJU1QgT0YgQ0FSRFMgRlJPTSBTRVJWRVJcbi8vR0VUIFVTRVIgSU5GTyBhbmQgQ0FSRFMgZnJvbSBTRVJWRVIgdXNpbmcgUHJvbWlzZS5hbGxcblxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0Q2FyZExpc3QoKV0pXG4gIC50aGVuKChbdXNlckRhdGEsIGNhcmRzRnJvbVNlcnZlcl0pID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICBuYW1lOiB1c2VyRGF0YS5uYW1lLFxuICAgICAgYWJvdXQ6IHVzZXJEYXRhLmFib3V0LFxuICAgICAgYXZhdGFyOiB1c2VyRGF0YS5hdmF0YXIsXG4gICAgICB1c2VySWQ6IHVzZXJEYXRhLl9pZCxcbiAgICB9KTtcbiAgICBjYXJkc1NlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAgICAgIHtcbiAgICAgICAgZGF0YTogY2FyZHNGcm9tU2VydmVyLFxuICAgICAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcbiAgICAgIH0sXG4gICAgICBzZWxlY3RvcnMuY2FyZFNlY3Rpb25cbiAgICApO1xuICAgIGNhcmRzU2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkc0Zyb21TZXJ2ZXIpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7XG4gIH0pO1xuXG4vLyAgbmV3Q2FyZFBvcHVwXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uoc2VsZWN0b3JzLnByZXZpZXdQb3B1cCk7XG5uZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gIHJlbmRlckNhcmQsIGluY2x1ZGluZyBoYW5kbGVab29tLCBoYW5kbGVDYW4sIGhhbmRsZUhlYXJ0XG5jb25zdCByZW5kZXJDYXJkID0gKGRhdGEpID0+IHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcbiAgICB7XG4gICAgICBkYXRhLFxuICAgICAgaGFuZGxlWm9vbTogKCkgPT4ge1xuICAgICAgICBuZXdDYXJkUG9wdXAub3BlbihkYXRhKTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICBzZWxlY3RvcnMuY2FyZFRlbXBsYXRlLFxuICAgIGFwaSxcbiAgICB1c2VySW5mby51c2VySWQsXG4gICAge1xuICAgICAgaGFuZGxlQ2FuOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbmZpcm1EZWxldGVQb3B1cC5jdXJyZW50Q2FyZEVsZW1lbnQgPSBjYXJkRWxlbWVudDtcbiAgICAgICAgY29uZmlybURlbGV0ZVBvcHVwLm9wZW4oY2FyZEVsZW1lbnQpO1xuICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGhhbmRsZUhlYXJ0OiBmdW5jdGlvbiAoY2FyZCkge1xuICAgICAgICBpZiAoY2FyZC5jYXJkR3JpZEhlYXJ0LmNsYXNzTGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBhcGlcbiAgICAgICAgICAgIC5hZGRMaWtlKGNhcmQuX2lkKVxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICBjYXJkLmFkZExpa2UoKTtcbiAgICAgICAgICAgICAgY2FyZC5saWtlcyA9IHJlcy5saWtlcztcbiAgICAgICAgICAgICAgY2FyZC5jYXJkR3JpZExpa2VzLnRleHRDb250ZW50ID0gY2FyZC5saWtlcy5sZW5ndGg7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yPScsIGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcGlcbiAgICAgICAgICAgIC5yZW1vdmVMaWtlKGNhcmQuX2lkKVxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICBjYXJkLnJlbW92ZUxpa2UoKTtcbiAgICAgICAgICAgICAgY2FyZC5saWtlcyA9IHJlcy5saWtlcztcbiAgICAgICAgICAgICAgY2FyZC5jYXJkR3JpZExpa2VzLnRleHRDb250ZW50ID0gY2FyZC5saWtlcy5sZW5ndGg7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yPScsIGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9XG4gICk7XG5cbiAgY2FyZHNTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQuY3JlYXRlQ2FyZCgpKTtcbn07XG5cbmxldCBjYXJkc1NlY3Rpb247XG5cbi8vTkVXIFBMQUNFIFBPUFVQXG5jb25zdCBuZXdQbGFjZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBzZWxlY3RvcnMucGxhY2VQb3B1cCxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKG5ld0NhcmRJbmZvKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ3h4eHh4eHg9JywgbmV3Q2FyZEluZm8pO1xuICAgIGJ0bk5ld1BsYWNlQ3JlYXRlLmlubmVyVGV4dCA9ICdDcmVhdGluZy4uLic7XG4gICAgYXBpXG4gICAgICAuYWRkQ2FyZChuZXdDYXJkSW5mbylcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgcmVuZGVyQ2FyZChyZXMpO1xuICAgICAgICBuZXdQbGFjZVBvcHVwLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGJ0bk5ld1BsYWNlQ3JlYXRlLmlubmVyVGV4dCA9ICdDcmVhdGUnO1xuICAgICAgfSk7XG4gIH0sXG59KTtcblxubmV3UGxhY2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL0VESVQgUFJPRklMRSBQT1BVUFxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3Rvcjogc2VsZWN0b3JzLnByb2ZpbGVQb3B1cCxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKG5ld1VzZXJEYXRhKSA9PiB7XG4gICAgYnRuRWRpdFByb2ZpbGVTYXZlLmlubmVyVGV4dCA9ICdTYXZpbmcuLi4nO1xuICAgIGNvbnN0IG5hbWUgPSBuZXdVc2VyRGF0YS5uYW1lO1xuICAgIGNvbnN0IGFib3V0ID0gbmV3VXNlckRhdGEuYWJvdXQ7XG4gICAgY29uc3QgYXZhdGFyID0gbmV3VXNlckRhdGEuYXZhdGFyO1xuICAgIGFwaVxuICAgICAgLmFkZFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgICAgICAgIG5hbWU6IHJlcy5uYW1lLFxuICAgICAgICAgIGFib3V0OiByZXMuYWJvdXQsXG4gICAgICAgICAgYXZhdGFyOiByZXMuYXZhdGFyLFxuICAgICAgICAgIHVzZXJJZDogcmVzLl9pZCxcbiAgICAgICAgfSk7XG4gICAgICAgIGVkaXRQcm9maWxlUG9wdXAuY2xvc2UoKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3Jlcz0nLCByZXMpO1xuICAgICAgICBjb25zb2xlLmxvZygndXNlcklkICA9JywgcmVzLl9pZCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGJ0bkVkaXRQcm9maWxlU2F2ZS5pbm5lclRleHQgPSAnU2F2ZSc7XG4gICAgICB9KTtcbiAgfSxcbn0pO1xuZWRpdFByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL0VESVQgQVZBVEFSIFBPUFVQXG5cbmNvbnN0IGVkaXRBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3Rvcjogc2VsZWN0b3JzLmF2YXRhclBvcHVwLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoYXZhdGFyTGluaykgPT4ge1xuICAgIGJ0bkVkaXRBdmF0YXJTYXZlLmlubmVyVGV4dCA9ICdTYXZpbmcuLi4nO1xuICAgIGFwaVxuICAgICAgLmFkZEF2YXRhcihhdmF0YXJMaW5rKVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICByZW5kZXJBdmF0YXIoYXZhdGFyTGluayk7XG4gICAgICAgIGVkaXRBdmF0YXJQb3B1cC5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBidG5FZGl0QXZhdGFyU2F2ZS5pbm5lclRleHQgPSAnU2F2ZSc7XG4gICAgICB9KTtcbiAgfSxcbn0pO1xuZWRpdEF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIHJlbmRlckF2YXRhcih7IGF2YXRhckxpbmsgfSkge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyh7IGF2YXRhcjogYXZhdGFyTGluayB9KTtcbn1cblxuZnVuY3Rpb24gZmlsbFByb2ZpbGVGb3JtKCkge1xuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHBvcHVwRWRpdFByb2ZpbGVOYW1lLnZhbHVlID0gdXNlckRhdGEudXNlck5hbWU7XG4gIHBvcHVwRWRpdFByb2ZpbGVBYm91dC52YWx1ZSA9IHVzZXJEYXRhLnVzZXJKb2I7XG59XG5cbi8vRVZFTlQgTElTVEVORVJTIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vRVZFTlQgTElTVEVORVIgLSBQRU5DSUwgQlVUVE9OXG5idXR0b25QZW5jaWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGZpbGxQcm9maWxlRm9ybSgpO1xuICBmb3JtVmFsaWRhdG9yc1snZm9ybUVkaXRQcm9maWxlJ10ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xufSk7XG5cbi8vRVZFTlQgTElTVEVORVIgLSBQTFVTIEJVVFRPTlxuYnV0dG9uUGx1cy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgZmlsbFByb2ZpbGVGb3JtKCk7XG4gIGZvcm1WYWxpZGF0b3JzWydmb3JtTmV3UGxhY2UnXS5yZXNldFZhbGlkYXRpb24oKTtcblxuICBuZXdQbGFjZVBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vL0VWRU5UIExJU1RFTkVSIC0gQVZBVEFSIFBFTkNJTCBCVVRUT05cbmJ1dHRvbkF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgZmlsbFByb2ZpbGVGb3JtKCk7XG4gIGZvcm1WYWxpZGF0b3JzWydmb3JtRWRpdEF2YXRhciddLnJlc2V0VmFsaWRhdGlvbigpO1xuXG4gIGVkaXRBdmF0YXJQb3B1cC5vcGVuKCk7XG59KTtcblxuZXhwb3J0IGNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgfSk7XG59O1xuXG5lbmFibGVWYWxpZGF0aW9uKGNvbmZpZyk7XG4iXSwibmFtZXMiOlsic2VsZWN0b3JzIiwiY2FyZFNlY3Rpb24iLCJjYXJkVGVtcGxhdGUiLCJwcmV2aWV3UG9wdXAiLCJwcm9maWxlUG9wdXAiLCJwbGFjZVBvcHVwIiwiYXZhdGFyUG9wdXAiLCJjb25maXJtUG9wdXAiLCJuYW1lU2VsZWN0b3IiLCJhYm91dFNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJDYXJkIiwiY2FyZFNlbGVjdG9yIiwiYXBpIiwidXNlcklkIiwiZGF0YSIsImhhbmRsZVpvb20iLCJoYW5kbGVDYW4iLCJoYW5kbGVIZWFydCIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJsaWtlcyIsIl9vd25lcklkIiwib3duZXIiLCJfaWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhbiIsImJpbmQiLCJfaGFuZGxlSGVhcnQiLCJfaGFuZGxlWm9vbSIsImFkZExpa2UiLCJyZW1vdmVMaWtlIiwiY2FyZEVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY29uc29sZSIsImxvZyIsImNhcmRHcmlkSGVhcnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJlbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInVuZGVmaW5lZCIsIl9nZXRUZW1wbGF0ZSIsImNhcmRHcmlkUGljdHVyZSIsImNhcmRHcmlkVGV4dCIsImNhcmRHcmlkTGlrZXMiLCJzcmMiLCJhbHQiLCJpIiwibGVuZ3RoIiwiY2FyZENhbiIsInRleHRDb250ZW50IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZm9yRWFjaCIsImNhcmREYXRhIiwiaXRlbSIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiYnV0dG9uQ2xvc2UiLCJjbG9zZSIsIl9jbG9zZVBvcHVwV2l0aFJlbW90ZUNsaWNrIiwiX2Nsb3NlUG9wdXBXaXRoRXNjYXBlIiwib3BlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldmVudCIsIndoaWNoIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIlBvcHVwV2l0aEltYWdlIiwiaW1hZ2UiLCJpbWFnZU5hbWUiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaW5wdXRMaXN0IiwiX2hpZGVJbnB1dEVycm9yIiwiX2hhc1ZhbGlkSW5wdXRzIiwiX2J1dHRvbkVsZW1lbnQiLCJkaXNhYmxlZCIsImlucHV0TGlzdCIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJ2YWx1ZXMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9wb3B1cEZvcm0iLCJfaW5wdXRzIiwiaW5wdXRPYmplY3QiLCJpbnB1dCIsInZhbHVlIiwiX2hhbmRsZVN1Ym1pdCIsInJlc2V0IiwiVXNlckluZm8iLCJfbmFtZUVsZW1lbnQiLCJfYWJvdXRFbGVtZW50IiwiX2F2YXRhckVsZW1lbnQiLCJ1c2VySW5mbyIsInVzZXJOYW1lIiwidXNlckpvYiIsInVzZXJBdmF0YXIiLCJhYm91dCIsImF2YXRhciIsIkFwaSIsImJhc2VVcmwiLCJhdXRoVG9rZW4iLCJfYmFzZVVybCIsIl9hdXRoVG9rZW4iLCJfaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwidGhlbiIsIl9jaGVja1Jlc3BvbnNlIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhdmF0YXJMaW5rIiwiYnRuRWRpdFByb2ZpbGVTYXZlIiwiZ2V0RWxlbWVudEJ5SWQiLCJidG5OZXdQbGFjZUNyZWF0ZSIsImJ0bkVkaXRBdmF0YXJTYXZlIiwiYnV0dG9uQXZhdGFyIiwiYnV0dG9uUGVuY2lsIiwiYnV0dG9uUGx1cyIsInBvcHVwRWRpdFByb2ZpbGVOYW1lIiwicG9wdXBFZGl0UHJvZmlsZUFib3V0IiwiY29uZmlybURlbGV0ZVBvcHVwIiwiY3VycmVudENhcmRFbGVtZW50IiwicmVtb3ZlQ2FyZCIsImNhdGNoIiwiZXJyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJhbGwiLCJnZXRVc2VySW5mbyIsImdldENhcmRMaXN0IiwidXNlckRhdGEiLCJjYXJkc0Zyb21TZXJ2ZXIiLCJzZXRVc2VySW5mbyIsImNhcmRzU2VjdGlvbiIsInJlbmRlckNhcmQiLCJyZW5kZXJJdGVtcyIsIm5ld0NhcmRQb3B1cCIsImNhcmQiLCJhZGRJdGVtIiwiY3JlYXRlQ2FyZCIsIm5ld1BsYWNlUG9wdXAiLCJuZXdDYXJkSW5mbyIsImlubmVyVGV4dCIsImFkZENhcmQiLCJmaW5hbGx5IiwiZWRpdFByb2ZpbGVQb3B1cCIsIm5ld1VzZXJEYXRhIiwiYWRkVXNlckluZm8iLCJlZGl0QXZhdGFyUG9wdXAiLCJhZGRBdmF0YXIiLCJyZW5kZXJBdmF0YXIiLCJmaWxsUHJvZmlsZUZvcm0iLCJmb3JtVmFsaWRhdG9ycyIsInJlc2V0VmFsaWRhdGlvbiIsImNvbmZpZyIsImZvcm1TZWxlY3RvciIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=